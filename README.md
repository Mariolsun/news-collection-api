# news-collection-api

Бэкенд диплома на Яндекс.Практикуме.
### Ссылка на API: https://api.newscollection.gq
### Запуск проекта:
* npm run dev - в режиме разработки с хот-релоудом;
* npm run start - в продакшн-режиме, без хот-релоуда;

## Фукнции API:

* регистрация и авторизация пользователей;
* сохранение, просмотр и удаление пользователем найденных (через сторонний API) статей.

## Роуты и контроллеры:

Роуты для регистрации и авторизации:
* POST /signup - регистрирует пользователя с переданными в теле email, password и name;
* POST /signin - проверяет переданные в теле email и password, и возвращает JWT токен.

Роуты, защищенные авторизацией (проверка присланного клиентом JWT):
* GET /users/me - возвращает информацию о пользователе (email и имя);
* GET /articles - возвращает все сохранённые пользователем статьи;
* POST /articles - создаёт статью;
* DELETE /articles/articleId - удаляет сохранённую статью  по \_id. Пользователь может удалять только свои статьи.

## Схемы коллекций в MongoDB:

Пользователь:
* email - обязательное поле, уникальное для каждого пользователя. Валидируется на соответствие схеме электронной почты;
* password - хеш пароля. Обязательное поле-строка. Не возвращается клиенту после успешной регистрации/авторизации;
* name - обязательное поле, от 2 до 30 символов.

Статья:
* keyword - ключевое слово, по которому стаью нашли. Обязательное поле;
* title - заголовок статьи. Обязательное поле;
* text - текст статьи. Обязательное поле;
* date - дата статьи. Обязательное поле;
* source - источник статьи. Обязательное поле;
* link - ссылка на статью. Обязательное поле, валидируется на соответствие схеме URL;
* image - ссылка на иллюстрацию к статье. Обязательное поле, валидируется на соответствие схеме URL;
* owner - \_id пользователя, сохранившего статью.


## Реализация проекта:

* сервер выполнен на express node.js;
* хранение данных в MongoDB (взаимодействие через модуль mongoose);
* авторизация с помощью JWT. Секретный ключ хранится на сервере в .env файле; 
* логгирование всех запросов к API и ошибок в файлах request.log и error.log соответственно c помощью пакетов winston, express-winston;
* вспомогательные плагины, файлы: .gitignore, .editorconfig, .eslintrc;
* запросы до передачи контроллерам валидируются с помощью модуля validation, реализованного с пакетом celebrate;
* ошибки обрабатываются и возвращаются клиенту централизованно с помощью модуля errorController.

